<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>Admin Task Manager</title>
Â  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">

Â  <main class="max-w-4xl mx-auto p-6">
Â  Â  <h1 class="text-3xl font-bold mb-6 text-center">ğŸ› ï¸ Admin Task Management</h1>

Â  Â  <!-- Add Task Form -->
Â  Â  <section class="mb-8 bg-white rounded shadow p-4">
Â  Â  Â  <h2 class="text-xl font-semibold mb-4">â• Add New Task</h2>
Â  Â  Â  <form id="addTaskForm" class="grid gap-4 md:grid-cols-2">
Â  Â  Â  Â  <input type="text" placeholder="Task Name" id="taskName" required class="p-2 border rounded" />
Â  Â  Â  Â  <input type="number" placeholder="Reward (à§³)" id="taskReward" required class="p-2 border rounded" />
Â  Â  Â  Â  <input type="url" placeholder="Visit URL" id="taskURL" required class="p-2 border rounded col-span-2" />
Â  Â  Â  Â  <textarea placeholder="Description" id="taskDesc" class="p-2 border rounded col-span-2"></textarea>
Â  Â  Â  Â  <button type="submit" class="bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 col-span-2">Add Task</button>
Â  Â  Â  </form>
Â  Â  </section>

Â  Â  <!-- Task List -->
Â  Â  <section class="bg-white rounded shadow p-4">
Â  Â  Â  <h2 class="text-xl font-semibold mb-4">ğŸ“‹ All Tasks</h2>
Â  Â  Â  <div id="taskList" class="space-y-4">
Â  Â  Â  Â  <p>Loading tasks...</p>
Â  Â  Â  </div>
Â  Â  </section>
Â  </main>

Â  <script type="module">
Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
Â  Â  import {
Â  Â  Â  getFirestore,
Â  Â  Â  collection,
Â  Â  Â  addDoc,
Â  Â  Â  getDocs,
Â  Â  Â  doc,
Â  Â  Â  updateDoc,
Â  Â  Â  deleteDoc,
Â  Â  Â  onSnapshot
Â  Â  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

Â  Â  const firebaseConfig = {
Â  Â  Â  apiKey: "AIzaSyCkYWvYNsg2-CR88Js6gcP2nXfvwI4TW30",
Â  Â  Â  authDomain: "bdwork-346d3.firebaseapp.com",
Â  Â  Â  projectId: "bdwork-346d3",
Â  Â  Â  storageBucket: "bdwork-346d3.appspot.com",
Â  Â  Â  messagingSenderId: "900963179093",
Â  Â  Â  appId: "1:900963179093:web:81e42d67bb31d603cc92dc"
Â  Â  };

Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  const db = getFirestore(app);

Â  Â  const addTaskForm = document.getElementById("addTaskForm");
Â  Â  const taskList = document.getElementById("taskList");

Â  Â  addTaskForm.addEventListener("submit", async (e) => {
Â  Â  Â  e.preventDefault();

Â  Â  Â  const name = document.getElementById("taskName").value;
Â  Â  Â  const reward = parseFloat(document.getElementById("taskReward").value);
Â  Â  Â  const url = document.getElementById("taskURL").value;
Â  Â  Â  const description = document.getElementById("taskDesc").value;

Â  Â  Â  try {
Â  Â  Â  Â  await addDoc(collection(db, "tasks"), {
Â  Â  Â  Â  Â  name,
Â  Â  Â  Â  Â  reward,
Â  Â  Â  Â  Â  url,
Â  Â  Â  Â  Â  description
Â  Â  Â  Â  });

Â  Â  Â  Â  addTaskForm.reset();
Â  Â  Â  Â  alert("âœ… Task added successfully!");
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  alert("Error adding task: " + err.message);
Â  Â  Â  }
Â  Â  });

Â  Â  function loadTasks() {
Â  Â  Â  const tasksRef = collection(db, "tasks");

Â  Â  Â  onSnapshot(tasksRef, (snapshot) => {
Â  Â  Â  Â  if (snapshot.empty) {
Â  Â  Â  Â  Â  taskList.innerHTML = "<p>No tasks found.</p>";
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  taskList.innerHTML = "";

Â  Â  Â  Â  snapshot.forEach(docSnap => {
Â  Â  Â  Â  Â  const task = { id: docSnap.id, ...docSnap.data() };

Â  Â  Â  Â  Â  const div = document.createElement("div");
Â  Â  Â  Â  Â  div.className = "p-4 border rounded shadow bg-gray-50";

Â  Â  Â  Â  Â  div.innerHTML = `
Â  Â  Â  Â  Â  Â  <input type="text" value="${task.name}" class="task-name p-1 border rounded w-full mb-1" />
Â  Â  Â  Â  Â  Â  <input type="text" value="${task.description || ''}" class="task-desc p-1 border rounded w-full mb-1" />
Â  Â  Â  Â  Â  Â  <input type="number" value="${task.reward}" class="task-reward p-1 border rounded w-full mb-1" />
Â  Â  Â  Â  Â  Â  <input type="url" value="${task.url}" class="task-url p-1 border rounded w-full mb-2" />

Â  Â  Â  Â  Â  Â  <div class="flex gap-2">
Â  Â  Â  Â  Â  Â  Â  <button class="update-btn bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">Update</button>
Â  Â  Â  Â  Â  Â  Â  <button class="delete-btn bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">Delete</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  // Update button
Â  Â  Â  Â  Â  div.querySelector(".update-btn").onclick = async () => {
Â  Â  Â  Â  Â  Â  const updatedName = div.querySelector(".task-name").value;
Â  Â  Â  Â  Â  Â  const updatedDesc = div.querySelector(".task-desc").value;
Â  Â  Â  Â  Â  Â  const updatedReward = parseFloat(div.querySelector(".task-reward").value);
Â  Â  Â  Â  Â  Â  const updatedURL = div.querySelector(".task-url").value;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  await updateDoc(doc(db, "tasks", task.id), {
Â  Â  Â  Â  Â  Â  Â  Â  name: updatedName,
Â  Â  Â  Â  Â  Â  Â  Â  description: updatedDesc,
Â  Â  Â  Â  Â  Â  Â  Â  reward: updatedReward,
Â  Â  Â  Â  Â  Â  Â  Â  url: updatedURL
Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  alert("âœ… Task updated!");
Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  alert("Error updating: " + err.message);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  // Delete button
Â  Â  Â  Â  Â  div.querySelector(".delete-btn").onclick = async () => {
Â  Â  Â  Â  Â  Â  if (!confirm("Are you sure you want to delete this task?")) return;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  await deleteDoc(doc(db, "tasks", task.id));
Â  Â  Â  Â  Â  Â  Â  alert("ğŸ—‘ï¸ Task deleted.");
Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  alert("Error deleting: " + err.message);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  taskList.appendChild(div);
Â  Â  Â  Â  });
Â  Â  Â  });
Â  Â  }

Â  Â  loadTasks();
Â  </script>

</body>
</html>
